@using FSM.Blazor.Data.Company;
@using DataModels.Enums;

@inject CompanyService CompanyService
@inject Radzen.DialogService DialogService
@inject NavigationManager NavigationManager
@inject NotificationService NotificationService
@inject AuthenticationStateProvider AuthenticationStateProvider

@page "/CompanyDetails"

<PageTitle>Company Details | Fly Manager </PageTitle>

<style>

    .description {
        font-size: 14px;
        font-weight: 530;
    }

    .rz-fileupload-row {
        display: none
    }

    .rz-fileupload {
        outline: none;
        margin-bottom: 0;
    }

    .rz-fileupload-buttonbar {
        position: absolute;
        top: 90%;
        left: 24%;
        opacity: 0.8;
        transform: translate(-50%, -50%);
        cursor: pointer;
        size: 53px;
    }

    .card-img-top {
        max-width: 100%;
        max-height: 100%;
        /*        object-fit:cover;
        */
    }

</style>
@if (companyData != null)
{
    <div class="row my-2">
        <div class="col-md-3 col-12">
            <RadzenCard>
                <div class="row">
                    <div class="profile-icon">
                        <RadzenImage onerror="this.onerror=null;this.src='../img/company-default-logo.png';" Path="@(companyData.LogoPath)" Style="width: 100%; height: 140px;object-fit:cover; border: 2px solid #1151f3;" />
                        <RadzenFileInput Style="outline:none" @bind-Value=@companyData.LogoPath
                                     Change=@(args => OnChangeAsync()) TValue="string" />
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12 col-md-6">
                        <span>Company Name:</span>
                    </div>
                    <div class="col-md-6 float-end text-right">
                        <b>@(companyData.Name)</b>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12 col-md-6">
                        <span>Address:</span>
                    </div>
                    <div class="col-md-6 float-end text-right">
                        <b>@(companyData.Address)</b>
                    </div>
                </div>
                <div class="row mt-2 mb-2">
                    <div class="col-12 m-1 align-items-right d-flex w-100 flex-row-reverse">
                        @if (_currentUserPermissionManager.IsAllowed(AuthStat, PermissionType.Create, @moduleName) && isAllowToEdit)
                        {
                            <RadzenButton Text="Update Company Details" Click=@(() => CompanyEditDialog())
                                  BusyText="Update Details ..." IsBusy="@isBusy" Icon="edit" class="w-100" ButtonStyle="ButtonStyle.Primary" />
                        }
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h3 class="h5 mt-2 text-center">Detail Information</h3>
                        <div class="row">
                            <div class="col-md-6">
                                <span>Timezone</span>
                            </div>
                            <div class="col-md-6 float-end text-right">
                                <b>@(companyData.TimeZone)</b>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-6">
                                Contact No
                            </div>
                            <div class="col-md-6 float-end text-right">
                                <b>@(companyData.ContactNo == null ? "-" : companyData.ContactNo)</b>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-6">
                                Website
                            </div>
                            <div class="col-md-6 float-end text-right">
                               <b>@(companyData.Website == null ? "-" : companyData.Website)</b>
                            </div>
                        </div>

                         <div class="row mt-2">
                            <div class="col-md-6">
                                Primary Airport
                            </div>
                            <div class="col-md-6 float-end text-right">
                               <b>@(companyData.PrimaryAirport == null ? "-" : companyData.PrimaryAirport)</b>
                            </div>
                        </div>

                         <div class="row mt-2">
                            <div class="col-md-6">
                                Primary Service
                            </div>
                            <div class="col-md-6 float-end text-right">

                                @if(companyData.PrimaryServiceId != null)
                                {
                                     <b> @companyData.PrimaryServicesList.Where(p=>p.Id == companyData.PrimaryServiceId).First().Name </b>
                                }
                                else
                                {
                                   <b>@("-")</b>
                                }

                            </div>
                        </div>

                    </div>
                    <div class="col-12 m-2">
                        <hr>
                    </div>

                </div>
            </RadzenCard>
        </div>
        <div class="col-md-9 col-12">
            <FSM.Blazor.Pages.Company.DetailsView.DetailTabs.Index CompanyData=@companyData>

            </FSM.Blazor.Pages.Company.DetailsView.DetailTabs.Index>
        </div>
    </div>
}


