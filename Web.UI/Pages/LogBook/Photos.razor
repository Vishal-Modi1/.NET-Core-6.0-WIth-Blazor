@using DataModels.VM.LogBook
@using Web.UI.Shared.Components.FileUploader;
@using DataModels.Enums;

<style>

    .box-images {
        margin-left: 5px;
        margin-bottom: 10px;
        border: 1px solid black
    }

</style>

<div class="logbook-header d-flex justify-content-between align-items-center my-1" @onclick=@(() => TriggerToggle())>
    <span><FontLabel fontColor="#0D89DD">Flight Photos</FontLabel></span>
    <span>
        @* <FontLabel fontColor="#042455">Configure</FontLabel>*@
        @if (ShowBodyPart)
        {
            <CustomIcons IconName="minus" />
        }
        else
        {
            <CustomIcons IconName="plus" />
        }
    </span>
</div>
<div class="col-12 py-1 @(!ShowBodyPart ? "d-none":"")">

    <div class="my-2 d-flex flex-wrap">

        @if (PhotosList.Any())
        {
            int i = 0;
            foreach (LogBookFlightPhotoVM logBookFlightPhotoVM in PhotosList)
            {
                i++;
                string imageText = $"Image {i}";
                @*style="background-image:url('@logBookFlightPhotoVM.ImagePath');max-height: 100px;max-width: 100px;min-width: 100px;min-height: 100px;"*@
                <div class=" mx-1 d-flex flex-column align-self-end" style="max-width: 105px;">
                    <div class="">
                        <img src='@logBookFlightPhotoVM.ImagePath' alt="@(imageText)" class="k-card-image" style="max-height: 100px;max-width: 100px;" />
                    </div>
                    <div>
                        <TelerikButton Class="btn k-btn-grid-delete flex-fill flight-image-delete-btn w-100 rounded-0" ThemeColor="error" ButtonType="@ButtonType.Button" OnClick="()=>OpenDeleteDialog(logBookFlightPhotoVM)">
                            <CustomIcons IconName="grid-delete" PrimaryColor="white"></CustomIcons>
                        </TelerikButton>
                    </div>
                </div>
                @*<CardImage Src="@logBookFlightPhotoVM.ImagePath" Height="100px" Width="100px" Class="box-images"></CardImage>*@
            }
        }

    </div>
</div>
<div class="col-12 py-1 @(!ShowBodyPart ? "d-none":"")">
    <div class="row my-0">
        <div class="col-1" />
        <div class="col-8">
            <CustomFileUpload DisplayName="test" OnInputFileChangeCallback="@OnFileChanged"
                              IsFileAdded="false" IsAllowMultiple="true" supportedFormats="@supportedImagesFormats">
            </CustomFileUpload>
        </div>
    </div>
</div>

@if (isDisplayPopup)
{
    <CustomPopupComponent Title="@popupTitle"
                      HeaderCssClass=@CustomPopupComponent.GetHeaderCssClass(operationType)
                      CloseOnOutsideClick="false" Width="600px"
                      OnClose="@(()=> {isDisplayPopup = false;})">
        <Body>

            @if (operationType == OperationType.Delete)
            {
                //Delete popup
                <div>
                    <p class="mb-4">Are you sure, You want to delete the image</p>
                    <div class="row" style="text-align:right">
                        <div class="col">

                            <TelerikButton Class="btn k-btn-danger" ButtonType="@ButtonType.Button" ThemeColor="error" OnClick="()=>DeleteAsync()">
                                Yes
                            </TelerikButton>

                            <TelerikButton Class="btn k-btn-secondary" ThemeColor="secondary" OnClick="()=>isDisplayPopup = false">
                                No
                            </TelerikButton>

                        </div>
                    </div>
                </div>
            }

        </Body>
    </CustomPopupComponent>
}